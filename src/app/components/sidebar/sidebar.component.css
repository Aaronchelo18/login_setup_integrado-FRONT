/* ===== Título ===== */
.menu-title{
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  font-size: 17px; text-align:center; font-weight:500; color:#fff;
  margin:0 0 8px 0; padding:0 16px; position:relative;
}
.menu-title::after{
  content:""; position:absolute; left:24%; transform:translateX(-50%);
  bottom:-10px; width:50px; height:4px; background:#40c6c6; border-radius:3px;
}

:host{ display:block; position:relative; z-index: var(--z-sidebar); }

.sidebar{
  width:100%; height:100%; background:#002655;
  display:flex; flex-direction:column; padding:20px 0; box-sizing:border-box;
}

/* ---------- Listas ---------- */
.menu-list{ list-style:none; overflow-y:auto; padding:0; margin:0; }
.menu-list li{ margin-bottom:16px; }

.menu-list li a, .static-dashboard a{
  display:flex; align-items:center; gap:8px;
  padding:10px 16px; color:#fff; text-decoration:none;
  font-weight:600; font-size:13px; position:relative; cursor:pointer;
  border-radius:8px; transition: background-color .2s, color .2s, opacity .18s;
}
.menu-list li a:hover, .static-dashboard a:hover{ background:#003263; }
.label{ font-weight:700; flex-grow:1; white-space:nowrap; }
.active-indicator{ width:4px; height:100%; background:transparent; position:absolute; left:0; top:0; border:none; }

/* ---------- Separadores ---------- */
.divider{ height:1px; margin:17px; background:rgba(255,255,255,.12); }
.divider.group{ margin:10px 0 14px 0; background:rgba(255,255,255,.08); }
.divider.section{ margin:12px 16px 14px 16px; }

/* ---------- Submenú ---------- */
.submenu{ list-style:none; margin:0 0 4px 0; padding:0 0 0 14px; }
.submenu .child a{
  padding:8px 14px; font-weight:600; font-size:12.5px; color:#dfe7f3; border-radius:6px;
}
.submenu .child a:hover{ background:#0a3a73; }
.parent > a.has-children:hover{ background:#003263; }

/* ---------- Iconos ---------- */
.mi.icon{ width:18px; min-width:18px; text-align:center; font-size:16px; opacity:.95; }
.mi.icon.sm{ font-size:14px; opacity:.9; }
.chevron{ margin-left:auto; font-size:12px; opacity:.8; transition: transform .18s ease; }
.chevron.open{ transform:rotate(180deg); }

/* ---------- Activo ---------- */
.menu-list li a.active, .submenu .child a.active, .static-dashboard a.active{ background:#18365f; color:#fff; }
.menu-list li a.active .mi.icon, .submenu .child a.active .mi.icon, .static-dashboard a.active .mi.icon{ color:#fff; opacity:1; }
.menu-list li a.active:hover, .submenu .child a.active:hover, .static-dashboard a.active:hover{ background:#18365f; }
.menu-list li a:hover .active-indicator,
.menu-list li a.active .active-indicator,
.static-dashboard a:hover .active-indicator,
.static-dashboard a.active .active-indicator{ background:#ffcc00; }

/* “pill” sutil hijos activos */
.submenu .child a.active{
  border-radius:8px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12);
}

/* ======== MODO COLAPSADO (icon-only) ======== */
/* Se activa porque el ancestro (main-grid) lleva la clase .collapsed */
:host-context(.collapsed) .sidebar{
  width: var(--sidebar-w-collapsed, 64px);
  padding: 12px 0;
}

/* Ocultar textos/chevrons/dividers y el título (no ocultamos .submenu: el *ngIf controla visibilidad) */
:host-context(.collapsed) .menu-title,
:host-context(.collapsed) .label,
:host-context(.collapsed) .chevron,
:host-context(.collapsed) .divider{
  display: none !important;
}

/* Items (padres e hijos visibles) centrados, mismo alto */
:host-context(.collapsed) .menu-list li{ margin:6px 0; }
:host-context(.collapsed) .menu-list li a,
:host-context(.collapsed) .submenu .child a{
  justify-content:center;
  gap:0;
  padding:10px 0;
  min-height:40px;
  border-radius:10px;
}

/* Caja del icono uniforme */
:host-context(.collapsed) .icon-wrap{
  width:24px; height:24px;
  display:inline-flex; align-items:center; justify-content:center;
}

/* Iconos de 20px TODOS (padre/hijo/nieto/imagen/iconify/font) */
:host-context(.collapsed) iconify-icon,
:host-context(.collapsed) .icon-wrap img,
:host-context(.collapsed) .mi.icon{
  width:20px !important; height:20px !important;
  min-width:20px !important; min-height:20px !important;
  font-size:20px !important; line-height:20px !important;
}

/* Hover/activo en colapsado */
:host-context(.collapsed) .menu-list li a:hover,
:host-context(.collapsed) .submenu .child a:hover{ background:#0a3a73; }
:host-context(.collapsed) .menu-list li a.active,
:host-context(.collapsed) .submenu .child a.active{ background:#18365f; }

/* ---------- Responsive ---------- */
@media (max-width: 768px){
  .sidebar{ width: var(--sidebar-w-collapsed, 64px); }
}
