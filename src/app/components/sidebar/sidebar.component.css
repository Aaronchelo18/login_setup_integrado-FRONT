/* ===== Título (Regresando al original) ===== */
.menu-title {
  font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
  font-size: 17px; text-align: center; font-weight: 500; color: #fff;
  margin: 0 0 8px 0; padding: 0 16px; position: relative;
}
.menu-title::after {
  content: ""; position: absolute; left: 24%; transform: translateX(-50%);
  bottom: -10px; width: 50px; height: 4px; background: #40c6c6; border-radius: 3px;
}

:host { display: block; position: relative; z-index: var(--z-sidebar); height: 100vh; }

.sidebar {
  width: 100%; height: 100%; background: #002655;
  display: flex; flex-direction: column; padding: 20px 0; box-sizing: border-box;
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ---------- Listas ---------- */
.menu-list { list-style: none; overflow-y: auto; padding: 0 12px; margin: 0; }
.menu-list li { margin-bottom: 4px; position: relative; }

.menu-list li a {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 16px; color: rgba(255, 255, 255, 0.7); text-decoration: none;
  font-weight: 600; font-size: 13px; position: relative; cursor: pointer;
  border-radius: 8px; transition: all 0.2s ease;
}

/* Hover y Active Unificados */
.menu-list li a:hover { background: rgba(255, 255, 255, 0.08); color: #fff; }
.menu-list li a.active { background: #18365f; color: #fff; }

/* Indicador Activo (Barra Amarilla) */
.active-indicator {
  width: 4px; height: 0; background: #ffcc00; 
  position: absolute; left: 0; top: 50%; 
  transform: translateY(-50%); border-radius: 0 4px 4px 0;
  transition: height 0.3s ease;
}
.menu-list li a.active .active-indicator,
.menu-list li a:hover .active-indicator { height: 70%; }

.label { font-weight: 700; flex-grow: 1; white-space: nowrap; transition: opacity 0.2s; }

/* ---------- Submenú ---------- */
.submenu { 
  list-style: none; margin: 0; padding: 0 0 0 14px;
  overflow: hidden; animation: slideDown .2s ease;
}
@keyframes slideDown {
  from { opacity: 0; max-height: 0; }
  to { opacity: 1; max-height: 500px; }
}
.submenu .child a { padding: 8px 14px; color: #dfe7f3; }

/* ---------- Iconos ---------- */
.icon-wrap { 
  display: flex; align-items: center; justify-content: center; 
  min-width: 20px; width: 20px; height: 20px; 
}
.chevron { margin-left: auto; font-size: 11px; transition: transform .2s; }
.chevron.open { transform: rotate(180deg); }

/* ---------- Separadores ---------- */
.divider { height: 1px; margin: 17px; background: rgba(255,255,255,.12); }
.divider.group { margin: 8px 0; background: rgba(255,255,255,.05); }

/* ==========================================
   MODO COLAPSADO (CORRECCIÓN DE CENTRADO)
   ========================================== */
:host-context(.collapsed) .sidebar { width: 64px; }

:host-context(.collapsed) .menu-title,
:host-context(.collapsed) .label,
:host-context(.collapsed) .chevron,
:host-context(.collapsed) .divider { display: none !important; }

:host-context(.collapsed) .menu-list { padding: 0 8px; }

:host-context(.collapsed) .menu-list li a {
  justify-content: center; /* Forza el centrado horizontal */
  padding: 12px 0;
  gap: 0;
}

:host-context(.collapsed) .icon-wrap {
  margin: 0 auto; /* Asegura que el contenedor del icono no tenga offsets */
}

/* El indicador en colapsado debe estar pegado al borde del sidebar */
:host-context(.collapsed) .active-indicator {
  left: -8px; /* Ajuste para compensar el padding del ul */
}

/* Submenú en colapsado (se ve como lista plana) */
:host-context(.collapsed) .submenu { padding-left: 0; }

/* ======== RESPONSIVE ======== */
@media (max-width: 768px) {
  .sidebar { width: 64px; }
  .menu-title, .label, .chevron, .divider { display: none; }
  .menu-list li a { justify-content: center; padding: 12px 0; }
}