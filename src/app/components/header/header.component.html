<header class="topbar">
  <div class="left-section">
    <button class="toggle-button" (click)="onToggleSidebar()">
      <span class="menu-icon">
        <span></span><span></span><span></span><span></span>
      </span>
    </button>
    <div class="separator"></div>
    <img src="assets/img/cordero.png" alt="Logo" class="logo" />
  </div>

  <div class="right-section">
    <ion-icon name="apps" class="apps-icon"></ion-icon>
    <div class="separator"></div>
    
    <img 
      src="assets/img/perfil.png" 
      alt="Foto" 
      class="user-img" 
      (click)="togglePanel()" 
    />

    <div class="text-info" *ngIf="usuario">
      <span class="nombre">{{ nombreCompleto }}</span>
      <span class="codigo" *ngIf="codigo">Código: {{ codigo }}</span>
    </div>
  </div>
</header>

<div class="panel-usuario-derecho" *ngIf="panelAbierto && usuario">
  <div class="panel-header">
    <ion-icon name="person-circle-outline" class="header-icon"></ion-icon>
    <h3>Datos del Usuario</h3>
  </div>
  
  <div class="panel-body">
    <div class="info-row">
      <div class="info-label-box">
        <ion-icon name="person-outline"></ion-icon>
        <span class="label">Nombre</span>
      </div>
      <span class="value">{{ usuario.nombres || usuario.person?.nombre }}</span>
    </div>

    <div class="info-row">
      <div class="info-label-box">
        <ion-icon name="people-outline"></ion-icon>
        <span class="label">Apellidos</span>
      </div>
      <span class="value">{{ (usuario.person?.paterno || '') + ' ' + (usuario.person?.materno || '') }}</span>
    </div>

    <div class="info-row">
      <div class="info-label-box">
        <ion-icon name="mail-outline"></ion-icon>
        <span class="label">Correo</span>
      </div>
      <span class="value email-value">{{ usuario.correo }}</span>
    </div>

    <div class="info-row" *ngIf="codigo">
      <div class="info-label-box">
        <ion-icon name="barcode-outline"></ion-icon>
        <span class="label">Código</span>
      </div>
      <span class="value">{{ codigo }}</span>
    </div>
  </div>

  <div class="boton-salida">
    <button (click)="logout()">
      <ion-icon name="log-out-outline"></ion-icon>
      Cerrar Sesión
    </button>
  </div>
</div>